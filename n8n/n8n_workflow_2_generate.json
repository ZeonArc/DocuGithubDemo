{
    "name": "DocuGithub 2: Generate (Enhanced)",
    "nodes": [
        {
            "parameters": {
                "httpMethod": "POST",
                "path": "webhook/generate",
                "options": {}
            },
            "id": "webhook-generate",
            "name": "Webhook: Generate",
            "type": "n8n-nodes-base.webhook",
            "typeVersion": 1,
            "position": [
                460,
                340
            ]
        },
        {
            "parameters": {
                "operation": "get",
                "table": "documentation_sessions",
                "id": "={{ $json.body.sessionId }}"
            },
            "id": "supabase-get-context",
            "name": "Supabase: Get Context",
            "type": "n8n-nodes-base.supabase",
            "typeVersion": 1,
            "position": [
                680,
                340
            ]
        },
        {
            "parameters": {
                "modelId": "models/gemini-1.5-pro",
                "prompt": "=You are an expert Technical Writer. Generate a professional README.md.\n\nContext:\n{{ $json.analysis_summary }}\n\nUser Configuration:\n- Style: {{ $json.config.style }} (If 'detailed', use deep explanations. If 'simple', use concise bullet points).\n- Key Topics to Include: {{ $json.config.topics }}\n- Reference Images (Include these URLS in relevant sections): {{ $json.config.images }}\n\nRequirements:\n1. Use standard Markdown formatting.\n2. Include a Title and Description.\n3. Add a Table of Contents.\n4. Include Badges (License, Tech Stack).\n5. Code blocks must have language tags.\n6. Output ONLY the raw Markdown string, no wrapping JSON."
            },
            "id": "gemini-generate",
            "name": "Gemini: Generate",
            "type": "n8n-nodes-base.googleGemini",
            "typeVersion": 1,
            "position": [
                900,
                340
            ]
        },
        {
            "parameters": {
                "table": "documentation_sessions",
                "updateKey": "id",
                "columns": "final_markdown, status",
                "value": "={{ $json.text }}, generated"
            },
            "id": "supabase-save-doc",
            "name": "Supabase: Save Doc",
            "type": "n8n-nodes-base.supabase",
            "typeVersion": 1,
            "position": [
                1120,
                340
            ]
        },
        {
            "parameters": {
                "respondWith": "json",
                "responseBody": "={ \"markdown\": \"{{ $json.text }}\" }"
            },
            "id": "respond-generate",
            "name": "Respond",
            "type": "n8n-nodes-base.respondToWebhook",
            "typeVersion": 1,
            "position": [
                1340,
                340
            ]
        }
    ]
}